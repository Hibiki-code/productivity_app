# Product Vision & Guidelines (プロダクトビジョンと開発指針)

## 1. プロダクトの目的と完成像 (Product Vision)

### 1.1 コンセプト: "Life OS"

「次にやるべきこと」と「その意義」を瞬時に確認できる統合プラットフォーム。
タスク、習慣、スケジュール、目標（Want-to/Must）を一元管理し、ユーザーの人生を最適化する。
単なるToDoリストではなく、**「毎日使いたくなる」「触っていて気持ちいい」** 極上のユーザー体験を提供する。

### 1.2 コア・バリュー (Core Values)

1. **Context & Significance (意義)**:
    * ただタスクをこなすだけでなく、「なぜそれをやるのか（理想像との関連）」を常に意識できる。
    * **"Center Pin"**: 理想や目標を達成するために**最も効果がある核心的な行動**を見極め、そこに集中させる。
2. **Identity-Based (アイデンティティ)**:
    * 「目標を達成した自分」ではなく「理想の自分（Being）」として振る舞うことを重視する。
3. **Data for AI (ライフログ)**:
    * 行動、感情、睡眠、位置情報などを蓄積し、AIが「今やるべきこと」を文脈（場所、気分、過去の遍歴）に合わせて提案できる基盤を作る。
4. **Premium Experience (体験)**:
    * 使うこと自体が喜びになるような動的で美しいUI。

---

## 2. 定義と役割 (Definitions)

### 2.1 3つの基本要素

* **タスク (Tasks)**: 「いつやってもいいが、どこかでやらなければならないこと」。
* **スケジュール (Schedule)**: 「行う場所・時間があらかじめ決まっているもの」（会議、授業、アポなど）。
* **習慣 (Habits)**: 「毎日やること」。**定着こそが価値**。
  * **Gratitude (感謝日記)**:
    > 「神経症傾向」が高い脳は、放っておくと勝手に**「ないもの」「不足しているもの」「未来のリスク」**を探し出し、警報を鳴らし続けます。これが不安の正体です。この回路を一時停止させるために、強制的に**「あるもの」「機能しているもの」**にスポットライトを当てます。
  * **Small Start**: 最初は「2分でできること」から始める。
  * **Resilience**: 調子が悪い日でも途切らせない「守りの目標」を用意する。

### 2.2 目標と「やりたいこと」 (Goals & Want-tos)

「やりたいこと」は時間軸と性質によって3つに分類される。

1. **体験系 (Experience / One-day)**:
    * 「〇〇に行く」「〇〇を食べる」など、1日で完結する喜び。
    * リストに蓄積し、休日に消化する。
2. **プロジェクト系 (Project / 1-Week)**:
    * 1週間程度で達成可能なマイルストーン。「ロードマップ機能」で管理。
    * ここでの達成体験（Small Win）が自己効力感を高める。
3. **長期的・継続的取り組み (Long-term / Growth)**:
    * 物理学の習得、能力向上など、終わりがない・長期的なもの。
    * **「やりたい理由」「必要な要素」「進捗（実績）」** を構造化して管理する。
    * 未来像（半年後、3年後…）を設定し、そこに向かうための「要素獲得」をプロジェクト系タスクに落とし込む。

### 2.3 理想像 (Ideal Self)

「理想の自分」「理想の生き方」を定義する最上位概念。

* 習慣や目標はすべてこの「理想像」に紐付く。
* **Affirmation**: 習慣「アファメーション」は、この定義された理想像を読み上げ・再確認する機能と直接連動する（Future）。
* 「今の行動がどの理想に繋がっているか」を示すことで、モチベーション（内発的動機）を維持する。

---

## 3. UX/UI 原則 (UX Principles)

### 3.1 習慣のゲーミフィケーション (Habit Levels)

Notion「習慣化大全」の哲学「守りの目標（Defensive Goal）」をシステム化する。

* **守りの習慣 (Level 1 / Defensive)**:
  * **コンセプト**: 「どんなに調子が悪くてもこれだけはやる」。ハードルを極限まで下げた「入り口」。
  * **目的**: ゼロにしないこと。連続記録（Streak）を守り、自己肯定感を保つ。
  * **UI**: 達成で「緑ドット」。(通常状態)
* **攻めの習慣 (Level 2 / Offensive)**:
  * **コンセプト**: 「理想的なパフォーマンス」。余裕がある時に行う本番のルーチン。
  * **UI**: 守りを達成すると出現（赤ドットへ変化）。達成すると「完了エリア」へ移動し、達成感を演出。
  * **If-Then Planning**: 「もし守りを達成したら、そのまま攻めを行う」という行動連鎖を促す。

### 3.2 楽観的UI (Optimistic UI)の徹底

* **即時反映**: ユーザーがアクション（完了チェックなど）を行ったら、サーバーのレスポンスを待たずに**0.1秒以内**にUIを更新する。
* **通信は裏側で**: データの保存はバックグラウンドで行い、成功・失敗のフィードバックが必要な場合のみ通知する。リストの並び替えなどで再取得（リロード）を行って画面をチラつかせることは厳禁。

---

## 4. アプリケーション設計指針 (Development Guidelines)

### 4.1 データベース設計

* **Meaning over Function**: 単にデータを保存するだけでなく、そのデータが「ユーザーにとって何を意味するか」（例：Status 2 は単なる数値ではなく「攻めの姿勢の表れ」）を理解して設計する。
* **Documentation**: テーブル定義書 ([database.md](database.md)) を常に最新に保ち、リレーションシップ（外部キー制約など）を意識する。

### 3.2 コード品質

* **Context-Aware**: 「動けばいい」コードではなく、このアプリ特有の文脈（Apps Scriptの制約、SSRとクライアントサイドの役割分担など）に即した実装を行う。
* **Non-Destructive**: 既存の関数を書き換えるときは、その関数が他のどこで使われているか、どんな意図で作られたかを必ず確認する。

---

### 4.2 特別な習慣ロジック (Special Business Logic)

* **ジャーナル文言の切り替え (Journal Text Switching)**:
  * **仕様**: 習慣名 (habit name) に特定のキーワードが含まれる場合、モーダルの文言（サブタイトル・プレースホルダー）をクライアントサイド ([js.html](file:///c:/Users/hbksk/.gemini/antigravity/scratch/productivity_app/js.html)) で動的に変更する。
  * **条件**:
    * `感謝日記` → 感謝用のプロンプト（"あるもの"にフォーカス）
    * `夢日記` → 夢記録用のプロンプト
  * **注意点**: 文言はDB管理ではなくコード（[js.html](file:///c:/Users/hbksk/.gemini/antigravity/scratch/productivity_app/js.html)）にハードコードされている。変更にはデプロイが必要。

---

*このドキュメントは、すべての開発判断の基準となる。迷ったときはこのビジョンに立ち返ること。*
